package com.cafe.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.web.cafe.dto.MenuDto;
import com.web.cafe.service.MenuService;

import io.swagger.annotations.ApiOperation;

@CrossOrigin("*")
@RestController
@RequestMapping("/menu")
public class MenuController {
	@Autowired
	private MenuService service;
	
	@GetMapping("/{cafeno}")
	@ApiOperation(value = "해당 카페 모든 메뉴 리턴")
	public List<MenuDto> select(@PathVariable Integer cafeno) {
		List<MenuDto> menulist = service.select(cafeno);
		return menulist;
	}
	
	
	@PostMapping
	@ApiOperation(value = "메뉴 추가 item price 모두 입력")
	public String insert(@RequestBody MenuDto menu) {
		int cnt = service.insert(menu);
		if(cnt > 0) {
			return "Success";
		}
		return "Failure";
	}
	
	@PutMapping
	@ApiOperation(value = "해당 카페 item 수정")
	public String updateItem(@RequestBody MenuDto menu) {
		int cnt = service.updateItem(menu);
		if(cnt > 0) {
			return "Success";
		}
		return "Failure";
	}
	
	@PutMapping
	@ApiOperation(value = "해당 카페 item의 가격 수정")
	public String updatePrice(@RequestBody MenuDto menu) {
		int cnt = service.updatePrice(menu);
		if(cnt > 0) {
			return "Success";
		}
		return "Failure";
	}
	
	@DeleteMapping("/{cafeno}")
	@ApiOperation(value = "해당 카페의  아이템 삭제")
	public String deleteItem(@PathVariable MenuDto menu) {
		int cnt = service.deleteItem(menu);
		if(cnt > 0) {
			return "Success";
		}
		return "Failure";
	}
	
	@DeleteMapping("/{cafeno}")
	@ApiOperation(value = "해당 카페의  아이템 삭제")
	public String deleteAll(@PathVariable int cafeno) {
		int cnt = service.deleteAll(cafeno);
		if(cnt > 0) {
			return "Success";
		}
		return "Failure";
	}
	
}
